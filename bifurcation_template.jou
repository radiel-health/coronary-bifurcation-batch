; ===========================================================
; 3D BIFURCATION TEMPLATE (GOLDEN MASTER)
; Validated for ANSYS Fluent 2025 R2 (25.2)
; ===========================================================
/file/set-tui-version "25.2"
/file/read-mesh "MESH_FILE"

; ---------- Models ----------
/define/models/solver/pressure-based yes
/define/models/viscous/laminar yes

; ---------- Materials ----------
/define/materials/copy fluid water-liquid
/define/boundary-conditions/fluid fluid_domain yes water-liquid
no
no
no
no
0
no
0
no
0
no
0
no
0
no
1
no
no
no
no

; ---------- Boundary Conditions ----------
; INLET
/define/boundary-conditions/velocity-inlet inlet
no
no
yes
yes
no
VALUE_VELOCITY
no
0

; OUTLETS
/define/boundary-conditions/pressure-outlet outlet_1
yes
no
0
no
yes
yes
no
no
no

/define/boundary-conditions/pressure-outlet outlet_2
yes
no
0
no
yes
yes
no
no
no

; WALLS
/define/boundary-conditions/wall wall-fluid_domain
no
no

; ---------- Solution Methods ----------
/solve/set/p-v-coupling 24
/solve/set/discretization-scheme/pressure 12
/solve/set/discretization-scheme/mom 4

; ---------- Solution Controls ----------
/solve/monitors/residual/convergence-criteria 1e-3 1e-4 1e-4 1e-4
/solve/monitors/residual/print? yes

; ---------- Initialization ----------
/solve/initialize/compute-defaults/velocity-inlet inlet
/solve/initialize/initialize-flow

; ---------- Solve ----------
/solve/iterate VALUE_ITERS

; ===========================================================
; DATA EXPORT (batch mode auto-overwrites)
; ===========================================================

; Create surface from interior zone for export
/surface/zone-surface interior-data interior-fluid_domain

; Save case and data
/file/write-case-data "results/MESH_NAME/ReVALUE_RE/bifurcation_ReVALUE_RE.cas.h5"
yes

; Export interior field data
/file/export/ascii "results/MESH_NAME/ReVALUE_RE/interior_full_ReVALUE_RE.csv" interior-data () no x-coordinate y-coordinate z-coordinate pressure x-velocity y-velocity z-velocity velocity-magnitude ()
no
yes

; Export wall data
/file/export/ascii "results/MESH_NAME/ReVALUE_RE/wall_data_ReVALUE_RE.csv" wall-fluid_domain () no x-coordinate y-coordinate z-coordinate pressure wall-shear x-wall-shear y-wall-shear z-wall-shear ()
no
yes

; Export outlet data
/file/export/ascii "results/MESH_NAME/ReVALUE_RE/outlets_ReVALUE_RE.csv" outlet_1 outlet_2 () no x-coordinate y-coordinate z-coordinate pressure velocity-magnitude ()
no
yes

/exit yes
